# Activity Summary for 1/25/2026

## 2:50:35 PM
The provided log details changes across two primary files: `FolderList.jsx` and `BookingDetailsButtons.jsx` (which impacts `FolderReview.jsx` indirectly through its data flow).

### File-Specific Updates:

*   **`g:\wamp64\www\sitenettech\api-client\src\pages\backend\Folder\FolderList.jsx`**
    *   **Timestamps:** This file was recorded at multiple points between `1/25/2026, 11:14:23 AM` and `1/25/2026, 2:49:42 PM`.
    *   **Summary:** This component is responsible for displaying a list of "folders" in the backend. It includes functionalities for:
        *   **Data Fetching & Display:** Fetches folder data, handles pagination, sets table headers, and manages UI loading states. It uses `supabase` for data retrieval and real-time updates.
        *   **Folder Creation:** Utilizes `formik` with `folderCreateSchema` for validation to create new folders. Upon creation, it generates a unique `folder_uid` and automatically creates a main passenger and additional unnamed passengers based on the input `folder_no_pax`, then navigates to the folder's edit page.
        *   **Filtering:** Provides extensive filtering options for folders, including date ranges (`created_at`, `updated_at`, `travel_date`), exact matches (UID, order ID, invoice ID, created/updated by, client type, folder status), and text searches. It also supports filtering based on "top summary" counts (e.g., "open", "confirmed", "quoted" folders, "today", "this month").
        *   **Settings & UI:** Manages various UI states such as modals for filtering, settings, and confirmation. It displays top summary counts of different folder statuses.
    *   **Note on Content Duplication:** All provided snippets for this file are identical, suggesting either no functional changes in the visible code section across these timestamps, or changes were in unlogged parts, or the file was simply saved multiple times without modification.

*   **`g:\wamp64\www\sitenettech\api-client\src\components\Backend\Interface\BookingDetails\parts\BookingDetailsButtons.jsx`**
    *   **Timestamp:** `1/25/2026, 12:09:27 PM`.
    *   **Summary:** This component includes the `AddToFolder` function, a critical piece of logic for integrating external booking data into the application's folder structure.
        *   **Folder Creation/Update:** It first checks if a folder linked to the booking's `basketId` already exists. If not, it creates a new folder in the `folders` table, populating it with details from the booking (`folder_uid`, lead passenger info, travel points, travel options, currency, etc.).
        *   **Passenger & Itinerary Insertion:** After creating the folder, it iterates through booking passengers and inserts them into the `passengers` table, mapping their details (e.g., ticket number, name, DOB, passport info). It also processes air segment data (`airsegments`) from the booking, mapping flight details and status codes before inserting them. The log shows a `price` processing logic, but the actual database insertion for `tickets` is truncated.
        *   **Utilities:** Uses helper functions like `getFolderOptions` to determine relevant service types (e.g., ticket, hotel, transfer) from the booking response and `getAirSegmentStatus` to standardize flight status codes.

*   **`g:\wamp64\www\sitenettech\api-client\src\pages\backend\Folder\FolderReview\FolderReview.jsx`**
    *   **Timestamps:** This file was recorded at multiple points between `1/25/2026, 12:26:16 PM` and `1/25/2026, 1:44:22 PM`.
    *   **Summary:** This component is designed for reviewing the details of a specific folder. It focuses on displaying structured booking information.
        *   **Data Loading:** Retrieves folder data either from `location.state` (passed via navigation) or from `sessionStorage` (with an expiry mechanism), indicating a temporary data persistence strategy.
        *   **User & Company Info:** Fetches associated user and company details from `supabase` based on the folder data.
        *   **UI Layout & Interaction:** Manages collapsible sections (`isCollapsed`) and tabbed navigation (`activeTab`, `childActiveTab`) to categorize and display different aspects of the folder, such as Passengers and Itinerary Items (Air Segment, Air Ticket).
        *   **Service Options:** Uses `getFolderOptions` (similar to `BookingDetailsButtons.jsx`) to identify and display the types of services included in the folder.
    *   **Note on Content Duplication:** All provided snippets for this file are identical, suggesting either no functional changes in the visible code section across these timestamps, or changes were in unlogged parts, or the file was simply saved multiple times without modification.

### Timestamps of Significant Changes:

*   The most significant changes, based on differing code content in the provided log, occurred at:
    *   **`1/25/2026, 11:14:23 AM`**: Initial or a major state of `FolderList.jsx`.
    *   **`1/25/2026, 12:09:27 PM`**: Introduction or major update of `BookingDetailsButtons.jsx`, detailing the complex logic for adding booking data to a folder, including passenger and air segment creation.
    *   **`1/25/2026, 12:26:16 PM`**: Initial or a major state of `FolderReview.jsx`.

All other listed timestamps for `FolderList.jsx` and `FolderReview.jsx` show identical code snippets to their first appearance in the log, indicating no new functional changes in the visible sections at those times.

### Patterns and Recurring Elements:

1.  **React Ecosystem:** Consistent use of React functional components, hooks (`useState`, `useEffect`, `useRef`, `useNavigate`, `useLocation`, `useParams`), and external libraries like `formik` for form management.
2.  **Supabase Integration:** Strong reliance on `supabase` for backend interactions (data fetching, insertion, real-time updates) across all listed components.
3.  **UI Component Reusability:** Extensive use of a dedicated `components/UI` directory for common UI elements (Buttons, Modals, Headers, Data Tables, Loaders), indicating a modular and reusable UI architecture.
4.  **Date and Utility Functions:** Frequent use of `dayjs` for date formatting and custom utility functions (`uid`, `today`) from `../../../util/utilityFunction`.
5.  **Centralized Constants:** Configuration and settings are often stored in dedicated constant files (e.g., `../../../constants/Settings/Folder`), promoting maintainability and consistency.
6.  **Iconography:** Consistent usage of `react-icons` for various visual cues across different pages.
7.  **Data Flow Management:** Strategies for managing data flow include props (`propsData` in `FolderReview`), context (`AuthContext`), and `sessionStorage` for temporary persistence.
8.  **Loading and Error States:** Common practice of managing `loading` and `btnLoading` states, and using `Toast` for success/error messages, indicating a focus on user feedback.