# Activity Summary for 11/4/2025

## 1:25:43 PM
This log details focused development activity on a Supabase CRM project, primarily revolving around flight search and air ticket management features. The changes occurred within a short timeframe on November 4, 2025.

**File-Specific Updates:**

*   **`h:\wamp64\www\supabase-crm\client-CRM-supabase\src\components\Backend\Search\Flight\FlightContent\FlightContent.jsx`**
    *   **11/4/2025, 12:27:38 PM:** The component's `submitForm` function initially used a hardcoded `currency: 'BDT'` within the `searchParam` object. Debugging `console.log(user)` statements were present.
    *   **11/4/2025, 12:32:02 PM:** The `currency` in `searchParam` was updated to `user?.company_currency`, making it dynamic based on the authenticated user's company. One `console.log(user)` was removed.
    *   **11/4/2025, 12:32:41 PM:** The remaining `console.log(user)` was removed, and a partial line `// Save search data to` was introduced.
    *   **11/4/2025, 12:32:54 PM:** The line for saving flight search data to `sessionStorage` was completed, `sessionStorage.setItem('flightSearchData', JSON.stringify({ airline:` indicating persistence of search parameters.

*   **`h:\wamp64\www\supabase-crm\client-CRM-supabase\src\pages\backend\Folder\Parts\Tabs\AirTicket.jsx`**
    *   **11/4/2025, 12:39:46 PM:** The initial state of the `AirTicket` component was committed, featuring data fetching, add/edit/delete operations, and payment summary calculations. The `AirTicketAdd` formik was defined but **lacked an explicit `validationSchema`**.
    *   **11/4/2025, 12:40:44 PM:** A validation schema was introduced by importing `airTicketSchema` from `FolderSchemas` and applying it to `AirTicketAdd` formik (`validationSchema: airTicketSchema`).
    *   **11/4/2025, 12:56:23 PM:** The validation schema import and usage were changed from `airTicketSchema` to `airTicketFullSchema`.
    *   **11/4/2025, 12:57:35 PM:** The validation schema import and usage were reverted from `airTicketFullSchema` back to `airTicketSchema`.

*   **`h:\wamp64\www\supabase-crm\client-CRM-supabase\src\pages\backend\Folder\Parts\Tabs\AirTicketModalBody.jsx`**
    *   **11/4/2025, 12:41:47 PM:** This version shows the detailed modal body logic, including passenger selection, dynamic pricing row management (add/remove), and complex auto-calculation of `sell` and `payable` amounts based on `buy` prices, various VATs, and commissions. Comments explicitly reference "old project pattern" and "column indices" for these calculations.
    *   **11/4/2025, 12:42:01 PM, 1:03:00 PM, 1:06:12 PM:** No discernible code changes were observed in these later commits for this file; the content is identical to the first entry. This suggests multiple save operations without functional code modifications.

*   **`h:\wamp64\www\supabase-crm\client-CRM-supabase\src\validation\schemas\FolderSchemas.js`**
    *   **11/4/2025, 12:55:33 PM:** This file introduced `airTicketFullSchema`, a comprehensive Yup schema for air ticket validation, including specific rules for PNR length (5 characters), required fields, date formats, and a nested array for `prices` with its own required and nullable fields. An older, commented-out `airTicketSchema` was also present.
    *   **11/4/2025, 12:56:38 PM:** The `airTicketFullSchema` was renamed to `airTicketSchema`. The content of the schema remained identical, only the export name changed.

**Patterns and Recurring Elements:**

*   **Rapid Iteration:** Several files, particularly `AirTicket.jsx` and `FlightContent.jsx`, show rapid changes within minutes, indicating active development and quick adjustments to logic and validation.
*   **Validation Schema Evolution:** The `AirTicket.jsx` and `FolderSchemas.js` files demonstrate an iterative process of defining and applying validation schemas. The `airTicketSchema` was introduced, temporarily upgraded/renamed to `airTicketFullSchema`, and then reverted, suggesting a dynamic understanding of validation requirements or a naming convention change.
*   **Detailed Financial Calculations:** The `AirTicketModalBody.jsx` contains explicit and somewhat rigidly defined calculations for ticketing prices, including various buy/sell VATs and commissions, often referencing "old project pattern" logic, which might imply migrating or maintaining complex business rules.
*   **Debugging Artifacts:** The removal of `console.log` statements in `FlightContent.jsx` is a common pattern for cleaning up code as features stabilize.
*   **Supabase Integration:** The project consistently uses Supabase for database interactions, fetching and inserting/updating records (`supabase.from(...)`).
*   **UI/Form Libraries:** The use of `formik` for form management, `Yup` for validation, `Ant Design` components, and `headlessui/react` indicates a modern React application stack.